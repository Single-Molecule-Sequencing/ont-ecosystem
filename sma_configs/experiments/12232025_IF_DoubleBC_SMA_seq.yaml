experiment:
  id: 12232025_IF_DoubleBC_SMA_seq
  date: '2025-12-23'
  type: double_barcode
  description: Double barcode SMA-seq experiment (358GB)
  prepared_by: Isaac Farnum
  prep_date: '2025-12-23'

library_prep:
  protocol: cleavage_ligation_cycling
  method: one_tube
  barcode_design: both_ends
  cycling:
    initial_cleavage: "37C for 10 min"
    cycling_program: "37C 3min / 16C 3min x 10 cycles"
    final_cleavage: "37C for 15 min"
  steps:
    - step: 1
      action: "One-tube cleavage-ligation cycling"
      details: "V0-4.1, 4.2, 4.3, 4.4, V0-39 cut with BsaI, ligated to modified barcodes (both ends), ligated to NA adapter"
  loading:
    volume_ul: 2.2
    amount_fmol: 50
  barcode_scheme: modified_double
  known_issues:
    - "Daisy chaining observed"
    - "Barcodes with adapters attached to backbone"
  root_cause: "Adjacent Level 0 plasmids present matching sites for other barcodes"
  fix_recommendation: "Use only odd OR only even numbered Level 0 plasmids per experiment"
paths:
  data_root: /data1/12232025_IF_DoubleBC_SMA_seq
  run_id: 20251223_1919_MD-100098_FBD71150_ccaaf379
  pod5_dir: /data1/12232025_IF_DoubleBC_SMA_seq/no_sample_id/20251223_1919_MD-100098_FBD71150_ccaaf379/pod5_pass
  bam_dir: /data1/12232025_IF_DoubleBC_SMA_seq/no_sample_id/20251223_1919_MD-100098_FBD71150_ccaaf379/bam_pass
  fastq_dir: /data1/12232025_IF_DoubleBC_SMA_seq/no_sample_id/20251223_1919_MD-100098_FBD71150_ccaaf379/fastq_pass
  sample_sheet: /data1/12232025_IF_DoubleBC_SMA_seq/no_sample_id/20251223_1919_MD-100098_FBD71150_ccaaf379/sample_sheet_FBD71150_20251223_1852_ccaaf379.csv
sequencing:
  device: PromethION
  position_id: MD-100098
  flow_cell_id: FBD71150
  flow_cell_product: FLO-MIN114
  kit: SQK-NBD114-24
samples:
  barcode01:
    alias: V04_1
    target_id: V0-4.1
    condition: standard
    replicate: 1
    barcode_type: single
  barcode02:
    alias: V04_2
    target_id: V0-4.2
    condition: standard
    replicate: 1
    barcode_type: single
  barcode03:
    alias: V04_3
    target_id: V0-4.3
    condition: standard
    replicate: 1
    barcode_type: single
  barcode04:
    alias: V04_4
    target_id: V0-4.4
    condition: standard
    replicate: 1
    barcode_type: single
  barcode05:
    alias: V039
    target_id: V0-39
    condition: standard
    replicate: 1
    barcode_type: single
  barcode06:
    alias: V04_1_2
    target_id: V0-4.1
    condition: double_barcode
    replicate: 2
    barcode_type: double
  barcode07:
    alias: V04_2_2
    target_id: V0-4.2
    condition: double_barcode
    replicate: 2
    barcode_type: double
  barcode08:
    alias: V04_3_2
    target_id: V0-4.3
    condition: double_barcode
    replicate: 2
    barcode_type: double
  barcode09:
    alias: V04_4_2
    target_id: V0-4.4
    condition: double_barcode
    replicate: 2
    barcode_type: double
  barcode10:
    alias: V039_2
    target_id: V0-39
    condition: double_barcode
    replicate: 2
    barcode_type: double
reference:
  targets_file: ../targets/sma_targets.yaml
  barcodes_file: ../targets/sma_barcodes.yaml
  use_sequence: designed
  validate_against_sanger: true
  fasta: 12232025_IF_DoubleBC_SMA_seq/reference.fa
  full_products: 12232025_IF_DoubleBC_SMA_seq/reference_full.fa
  targets_only: 12232025_IF_DoubleBC_SMA_seq/reference_targets.fa
  artifacts: 12232025_IF_DoubleBC_SMA_seq/reference_artifacts.fa

expected_products:
  type: double_barcode
  structure: "PREFIX(13bp) + ADAPTER(15bp) + FLANK_F(8bp) + BARCODE(22-24bp) + FLANK_R(8bp) + TARGET"
  note: "Double barcoding captures both forward and reverse complement strands"
  forward_products:
    NB01_V0-4.1_forward: {barcode: NB01, target: V0-4.1, overhang: TTCG}
    NB02_V0-4.2_forward: {barcode: NB02, target: V0-4.2, overhang: AGGA}
    NB03_V0-4.3_forward: {barcode: NB03, target: V0-4.3, overhang: AGAG}
    NB04_V0-4.4_forward: {barcode: NB04, target: V0-4.4, overhang: TGGT}
    NB05_V0-39_forward: {barcode: NB05, target: V0-39, overhang: CTGA}
  reverse_products:
    NB06_V0-4.2_reverse: {barcode: NB06, target: V0-4.2, overhang: TCCT}
    NB07_V0-4.2_reverse: {barcode: NB07, target: V0-4.2, overhang: CTCT}
    NB08_V0-4.4_reverse: {barcode: NB08, target: V0-4.4, overhang: ACCA}
    NB09_V0-4.4_reverse: {barcode: NB09, target: V0-4.4, overhang: TCAG}
analysis:
  min_read_length: 100
  max_read_length: 500
  min_qscore: 10
  size_classification: true
  alignment_validation: true
output:
  base_dir: /data2/repos/ont-ecosystem/sma_configs/experiments/12232025_IF_DoubleBC_SMA_seq
  generate_reference_fasta: true
  generate_sample_sheet_csv: true

# Analysis results (generated 2025-12-30)
analysis_results:
  status: daisy_chains
  total_reads: 12074175
  total_bases_mb: 24645.7
  n50_bp: 2613
  mean_qscore: 14.1
  median_qscore: 20.8
  signal_positive_pct: 98.0
  analysis_date: '2025-12-30'
  notes: |
    Daisy chaining present due to adjacent Level 0 plasmids.
    Bimodal length distribution with peaks at ~150bp and ~2,600bp.
    Fix validated in 12282025 experiment using odd/even separation.
